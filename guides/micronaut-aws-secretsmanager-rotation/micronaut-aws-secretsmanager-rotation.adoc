= @guideTitle@

@guideIntro@

Authors: @authors@

Micronaut Version: @micronaut@

include::{commondir}/common-gettingStarted.adoc[]

include::{commondir}/common-requirements.adoc[]

include::{commondir}/common-completesolution.adoc[]

== Writing the App

include::{commondir}/common-cli-or-launch.adoc[]

[source,bash]
----
mn create-function-app example.micronaut.micronautguide --features=aws-lambda --build=@build@ --lang=@lang@
----

include::{commondir}/common-build-lang-arguments.adoc[]

If you use https://launch.micronaut.io[Micronaut Launch], select serverless function as application type and add `aws-lambda` feature.

include::{commondir}/common-default-package.adoc[]

include::{commondir}/common-annotationprocessors.adoc[]

include::{commondir}/common-function-delete-sample-code.adoc[]

== Code

=== JSON Web Key Generation

Create an interface to encapsulate the contract to generate a https://datatracker.ietf.org/doc/html/rfc7517[JWK (JSON Web Key)]

source:JsonWebKeyGenerator[]

To generate a JWK, use https://connect2id.com/products/nimbus-jose-jwt[Nimbus JOSE + JWT], an open source Java library to generate JSON Web Tokens (JWT).

Add the following dependency:

dependency:nimbus-jose-jwt[groupId=com.nimbusds,version=@nimbus-jose-jwtVersion@]

Create an implementation of `JsonWebKeyGenerator`

source:RS256JsonWebKeyGenerator[]

<1> Annotate the class with `@Singleton` to register it in the application context.


include::{commondir}/common-testApp.adoc[]

include::{commondir}/common-runapp.adoc[]


== Lambda

Create a Lambda Function. As a runtime, select Java 11 (Correto).

image::create-function.png[]

=== Upload Code

include::{commondir}/common-executable-jar.adoc[]

Upload it:

image::upload-function-code.png[]

=== Handler

As Handler, set:

`example.micronaut.Handler`

image::handler-2.png[]


include::{commondir}/common-next.adoc[]

include::{commondir}/common-helpWithMicronaut.adoc[]