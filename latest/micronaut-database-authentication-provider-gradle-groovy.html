<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1'/>
    <title>LDAP and Database authentication providers</title>
    <link rel='stylesheet' id='wp-block-library-css' href='https://micronaut.io/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all'/>
    <link rel='stylesheet' id='fonts-fira-sans-css' href='https://fonts.googleapis.com/css2?family=Fira+Sans%3Awght%40300%3B500&#038;display=swap&#038;ver=5.7' type='text/css' media='all'/>
    <link rel='stylesheet' id='micronaut-style-css' href='https://micronaut.io/wp-content/themes/micronaut/style.min.css' type='text/css' media='all'/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="https://micronaut.io/wp-content/uploads/2021/02/favicon.ico" type="image/png">
    <link rel="shortcut icon" href="https://micronaut.io/wp-content/uploads/2021/02/favicon.ico" type="image/png">
    <link href="coderay.css" rel="stylesheet" />
    <link href="guide.css" rel="stylesheet" />
    <script src="guide.js"></script>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://guides.micronaut.io/latest/images/cards/micronaut-database-authentication-provider.png"/>
    <meta name="twitter:creator" content="@micronautfw"/>
    <meta name="twitter:site" content="@micronautfw"/>
    <meta name="twitter:title" content="LDAP and Database authentication providers"/>
    <meta name="twitter:description" content="Learn how to create a LDAP and a database authentication provider in a Micronaut Application."/>
</head>
<body class="page-template page-template-page-sidebar page-template-page-sidebar-php page page-parent guide">

<header id="header">

    <div class="container">

        <nav class="navbar navbar-expand-lg navbar-dark">

            <button class="collapsed" type="button" data-toggle="collapse" data-target="#nav" aria-expanded="false">
                <span></span>
            </button>

            <a class="navbar-brand" href="https://micronaut.io">
                <img src="https://micronaut.io/wp-content/uploads/2020/11/MIcronautLogo_Horizontal.svg" alt="Micronaut framework"/>
            </a>

            <div class="collapse navbar-collapse" id="nav">

                <ul class="navbar-nav ml-auto">

                    <li id="menu-item-2865" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2865 nav-item">
                        <a href="https://micronaut.io/download/" class="nav-link">Download</a>
                    </li>
                    <li id="menu-item-2868" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-22 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-2872 active dropdown nav-item">
                        <a href="./index.html" class="nav-link dropdown-toggle" data-toggle="dropdown">Learn</a>
                        <ul class="dropdown-menu">
                            <li id="menu-item-2869" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2869">
                                <a href="https://micronaut.io/docs/" class="dropdown-item">User Documentation</a>
                            </li>
                            <li id="menu-item-2870" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2870">
                                <a href="./index.html" class="dropdown-item">Guides</a>
                            </li>
                            <li id="menu-item-2896" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2896">
                                <a href="https://micronaut.io/category/microcast/" class="dropdown-item">Microcasts</a>
                            </li>
                            <li id="menu-item-2897" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2897">
                                <a href="https://micronaut.io/category/webinar/" class="dropdown-item">Webinars</a>
                            </li>
                            <li id="menu-item-2871" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2871">
                                <a href="https://micronaut.io/professional-training/" class="dropdown-item">Professional Training</a>
                            </li>
                        </ul>
                    </li>
                    <li id="menu-item-2878" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2878 dropdown nav-item">
                        <a href="https://micronaut.io/blog/" class="nav-link dropdown-toggle" data-toggle="dropdown">Resources</a>
                        <ul class="dropdown-menu">
                            <li id="menu-item-2879" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2879">
                                <a href="https://micronaut.io/blog/" class="dropdown-item">Blog</a>
                            </li>
                            <li id="menu-item-2881" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2881">
                                <a href="https://micronaut.io/events/" class="dropdown-item">Upcoming Events</a>
                            </li>
                            <li id="menu-item-2880" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2880">
                                <a href="https://micronaut.io/commercial-support/" class="dropdown-item">Commercial Support</a>
                            </li>
                            <li id="menu-item-2882" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2882">
                                <a href="https://micronaut.io/faq/" class="dropdown-item">FAQ</a>
                            </li>
                            <li id="menu-item-2883" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2883">
                                <a href="https://micronaut.io/contact/" class="dropdown-item">Contact</a>
                            </li>
                        </ul>
                    </li>
                    <li id="menu-item-2872" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2878 dropdown nav-item">
                        <a href="https://micronaut.io/foundation/" aria-current="page" class="nav-link dropdown-toggle" data-toggle="dropdown">Foundation</a>
                        <ul class="dropdown-menu">
                            <li id="menu-item-2877" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-22 current_page_item menu-item-2877 active">
                                <a href="https://micronaut.io/foundation/" aria-current="page" class="dropdown-item">Overview</a>
                            </li>
                            <li id="menu-item-2874" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2874">
                                <a href="https://micronaut.io/foundation/corporate-sponsorship/" class="dropdown-item">Corporate Sponsorship</a>
                            </li>
                            <li id="menu-item-2873" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2873">
                                <a href="https://micronaut.io/foundation/community-sponsorship/" class="dropdown-item">Community Sponsorship</a>
                            </li>
                            <li id="menu-item-2876" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2876">
                                <a href="https://micronaut.io/foundation/sponsors/" class="dropdown-item">Sponsors</a>
                            </li>
                        </ul>
                    </li>
                    <li id="menu-item-2884" class="action menu-item menu-item-type-custom menu-item-object-custom menu-item-2884 nav-item">
                        <a target="_blank" rel="noopener" href="https://micronaut.io/launch/" class="nav-link">Launch</a>
                    </li>
                </ul>
            </div>

        </nav>

    </div>
</header>
<div id="breadcrumbs"><div class="container"><a href="https://micronaut.io/">Home</a> » <a href="./index.html">Guides</a> » <a href="micronaut-database-authentication-provider.html">LDAP and Database authentication providers</a> » <span class="breadcrumb_last" aria-current="page">gradle | groovy</span></div></div><!-- .breadcrumbs -->
<main id="main">
    <div class="container">
        <div class="row">
            <div class="col-md-4">

                <div class="toc">
                    <div class="inner">
                        <h1 class="title title_large first-word-bold first-word-break">Table of Contents</h1>
                        <div class="underline"></div>
                        
<ul class="sectlevel1">
<li><a href="#getting-started">1. Getting Started</a></li>
<li><a href="#what-you-will-need">2. What you will need</a></li>
<li><a href="#solution">3. Solution</a></li>
<li><a href="#writing-the-application">4. Writing the Application</a>
<ul class="sectlevel2">
<li><a href="#security-ldap">4.1. Security LDAP</a></li>
<li><a href="#gorm">4.2. GORM</a></li>
<li><a href="#password-encoder">4.3. Password Encoder</a></li>
<li><a href="#register-service">4.4. Register Service</a></li>
<li><a href="#delegating-authentication-provider">4.5. Delegating Authentication Provider</a></li>
<li><a href="#ldap-authentication-provider-test">4.6. LDAP Authentication Provider test</a></li>
<li><a href="#login-testing">4.7. Login Testing</a></li>
</ul>
</li>
<li><a href="#testing-the-application">5. Testing the Application</a></li>
<li><a href="#running-the-application">6. Running the Application</a></li>
<li><a href="#next-steps">7. Next steps</a></li>
<li><a href="#help-with-the-micronaut-framework">8. Help with the Micronaut Framework</a></li>
</ul>

                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <h1>LDAP and Database authentication providers</h1>
                <div class="underline"></div>
<div class="sect1">
<div class="sectionbody">

<div class="paragraph">
<p>Learn how to create a LDAP and a database authentication provider in a Micronaut Application.</p>
</div>
<div class="paragraph">
<p>Authors: Sergio del Amo</p>
</div>
<div class="paragraph">
<p>Micronaut Version: 3.9.2</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started">1. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide, we will create a Micronaut application written in Groovy.</p>
</div>
<div class="paragraph">
<p>The application uses multiple authentication providers; an LDAP and a database authentication provider.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/diagram-ldap-authentication.provider.svg" alt="diagram ldap authentication.provider"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-will-need">2. What you will need</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p>JDK 1.8 or greater installed with <code>JAVA_HOME</code> <a href="https://www.baeldung.com/java-home-on-windows-7-8-10-mac-os-x-linux">configured appropriately</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div><div class="row"><div class="col-md-12"><div class="sect1">
<h2 id="solution">3. Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you follow the instructions in the next sections and create the application step by step. However, you can go right to the <strong>completed example</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="micronaut-database-authentication-provider-gradle-groovy.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="writing-the-application">4. Writing the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create an application using the <a href="https://docs.micronaut.io/latest/guide/#cli">Micronaut Command Line Interface</a> or with <a href="https://launch.micronaut.io">Micronaut Launch</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mn create-app --features=security-jwt,security-ldap,reactor example.micronaut.micronautguide --build=gradle --lang=groovy</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you don&#8217;t specify the <code>--build</code> argument, Gradle is used as the build tool. <br/> If you don&#8217;t specify the <code>--lang</code> argument, Java is used as the language.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you use Micronaut Launch, select Micronaut Application as application type and add the <code>security-jwt</code>, <code>security-ldap</code>, and <code>reactor</code> features.</p>
</div>
<div class="paragraph">
<p>The previous command creates a Micronaut application with the default package <code>example.micronaut</code> in a directory named <code>micronautguide</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have an existing Micronaut application and want to add the functionality described here, you can <a href="https://micronaut.io/launch?features=security-jwt&amp;features=security-ldap&amp;features=hibernate-gorm&amp;features=reactor&amp;features=serialization-jackson&amp;lang=GROOVY&amp;build=GRADLE&amp;test=SPOCK&amp;name=micronautguide&amp;type=DEFAULT&amp;package=example.micronaut&amp;activity=diff" target="_blank" rel="noopener">view the dependency and configuration changes from the specified features</a> and apply those changes to your application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://guides.micronaut.io/latest/micronaut-intellij-idea-ide-setup.html">Setup IntelliJ IDEA to develop Micronaut Applications</a>.</p>
</div>
<div class="paragraph">
<p>The generated <code>application.yml</code> includes configuration settings that enable security:</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">micronaut</span>:
  <span class="key">application</span>:
    <span class="key">name</span>: <span class="string"><span class="content">micronautguide</span></span>
  <span class="key">security</span>:
    <span class="key">authentication</span>: <span class="string"><span class="content">bearer </span></span><i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key">token</span>:
      <span class="key">jwt</span>:
        <span class="key">signatures</span>:
          <span class="key">secret</span>:
            <span class="key">generator</span>: <i class="conum" data-value="2"></i><b>(2)</b>
              <span class="key">secret</span>: <span class="string"><span class="content">'&quot;${JWT_GENERATOR_SIGNATURE_SECRET:pleaseChangeThisSecretForANewOne}&quot;' </span></span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set <code>micronaut.security.authentication</code> as <code>bearer</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can create a SecretSignatureConfiguration named <code>generator</code> via configuration as illustrated above. The generator signature is used to sign the issued JWT claims.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Change this to your own secret and keep it safe (do not store this in your VCS)</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="security-ldap">4.1. Security LDAP</h3>
<div class="paragraph">
<p>The Micronaut framework supports authentication with LDAP out of the box.</p>
</div>
<div class="paragraph">
<p>We will use the open Debian LDAP service for this guide.</p>
</div>
<div class="paragraph">
<p>Create the configuration properties matching those of the LDAP Server.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">micronaut</span>:
  <span class="key">security</span>:
    <span class="key">ldap</span>:
      <span class="key">default</span>: <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="key">context</span>:
          <span class="key">server</span>: <span class="string"><span class="content">'ldaps://db.debian.org'  </span></span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="key">managerDn</span>: <span class="string"><span class="content">'cn=read-only-admin,dc=debian,dc=org'  </span></span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="key">managerPassword</span>: <span class="string"><span class="content">'password'  </span></span><i class="conum" data-value="4"></i><b>(4)</b>
        <span class="key">search</span>:
          <span class="key">base</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dc=debian,dc=org</span><span class="delimiter">&quot;</span></span>  <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="key">groups</span>:
          <span class="key">enabled</span>: <span class="string"><span class="content">true  </span></span><i class="conum" data-value="6"></i><b>(6)</b>
          <span class="key">base</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dc=debian,dc=org</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>LDAP authentication in the Micronaut framework supports configuration of one or more LDAP servers to authenticate with. You need to name each one. In this tutorial, we use <code>default</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Each server has its own settings and can be enabled or disabled.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Sets the manager DN</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Sets the manager password.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Sets the base DN to search.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Enable group search.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Sets the base DN to search from.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="gorm">4.2. GORM</h3>
<div class="paragraph">
<p><a href="https://gorm.grails.org">GORM</a> <strong>is a powerful Groovy-based data access toolkit for the JVM</strong>. GORM is the data access
toolkit used by <a href="https://grails.org/">Grails</a> and provides a rich set of APIs for accessing relational and non-relational data, including implementations for Hibernate (SQL), MongoDB, Neo4j, Cassandra, an in-memory ConcurrentHashMap for
testing, and an automatic GraphQL schema generator.</p>
</div>
<div class="paragraph">
<p>Add GORM dependencies to the project:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">io.micronaut.beanvalidation:micronaut-hibernate-validator</span><span class="delimiter">&quot;</span></span>)
implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">io.micronaut.groovy:micronaut-hibernate-gorm</span><span class="delimiter">&quot;</span></span>)
runtimeOnly(<span class="string"><span class="delimiter">&quot;</span><span class="content">com.h2database:h2</span><span class="delimiter">&quot;</span></span>)
runtimeOnly(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.apache.tomcat:tomcat-jdbc</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the database configuration:</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">dataSource</span>:
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:h2:mem:devDb;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE</span></span>
  <span class="key">driverClassName</span>: <span class="string"><span class="content">org.h2.Driver</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">sa</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">pooled</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">jmxExport</span>: <span class="string"><span class="content">true</span></span>
<span class="key">hibernate</span>:
  <span class="key">hbm2ddl</span>:
    <span class="key">auto</span>: <span class="string"><span class="content">update</span></span>
  <span class="key">cache</span>:
    <span class="key">queries</span>: <span class="string"><span class="content">false</span></span>
    <span class="key">use_second_level_cache</span>: <span class="string"><span class="content">false</span></span>
    <span class="key">use_query_cache</span>: <span class="string"><span class="content">false</span></span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="domain-classes">4.2.1. Domain Classes</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A domain class fulfills the M in the Model View Controller (MVC) pattern and represents a persistent entity that is
mapped onto an underlying database table.</p>
</div>
</blockquote>
</div>
<div class="sect4">
<h5 id="user">User</h5>
<div class="paragraph">
<p>Create a <code>UserState</code> interface to model the user state.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/UserState.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="type">interface</span> UserState {

    <span class="predefined-type">String</span> getUsername()

    <span class="predefined-type">String</span> getPassword()

    <span class="type">boolean</span> isEnabled()

    <span class="type">boolean</span> isAccountExpired()

    <span class="type">boolean</span> isAccountLocked()

    <span class="type">boolean</span> isPasswordExpired()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create <code>User</code> domain class to store users within our application.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/domain/User.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut.domain

<span class="keyword">import</span> <span class="include">example.micronaut.UserState</span>
<span class="keyword">import</span> <span class="include">grails.gorm.annotation.Entity</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="keyword">import</span> <span class="include">io.micronaut.serde.annotation.Serdeable</span>

<span class="annotation">@Serdeable</span>
<span class="annotation">@Entity</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">User</span> <span class="directive">implements</span> GormEntity&lt;User&gt;, UserState { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="predefined-type">String</span> email
    <span class="predefined-type">String</span> username
    <span class="predefined-type">String</span> password
    <span class="type">boolean</span> enabled = <span class="predefined-constant">true</span>
    <span class="type">boolean</span> accountExpired = <span class="predefined-constant">false</span>
    <span class="type">boolean</span> accountLocked = <span class="predefined-constant">false</span>
    <span class="type">boolean</span> passwordExpired = <span class="predefined-constant">false</span>

    <span class="directive">static</span> constraints = {
        email <span class="key">nullable</span>: <span class="predefined-constant">false</span>, <span class="key">blank</span>: <span class="predefined-constant">false</span>
        username <span class="key">nullable</span>: <span class="predefined-constant">false</span>, <span class="key">blank</span>: <span class="predefined-constant">false</span>, <span class="key">unique</span>: <span class="predefined-constant">true</span>
        password <span class="key">nullable</span>: <span class="predefined-constant">false</span>, <span class="key">blank</span>: <span class="predefined-constant">false</span>, <span class="key">password</span>: <span class="predefined-constant">true</span>
    }

    <span class="directive">static</span> mapping = {
        password <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">`password`</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>GORM entities should be annotated with <code>grails.gorm.annotation.Entity</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use of <code>GormEntity</code> to aid IDE support. When used inside a Grails context, some IDEs will use the grails-app/domain location as a hint to enable code completion.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="role">Role</h5>
<div class="paragraph">
<p>Create <code>Role</code> domain class to store authorities within our application.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/domain/Role.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut.domain

<span class="keyword">import</span> <span class="include">grails.gorm.annotation.Entity</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="keyword">import</span> <span class="include">io.micronaut.serde.annotation.Serdeable</span>

<span class="annotation">@Serdeable</span>
<span class="annotation">@Entity</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">Role</span> <span class="directive">implements</span> GormEntity&lt;<span class="predefined-type">Role</span>&gt; {  <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="predefined-type">String</span> authority

    <span class="directive">static</span> constraints = {
        authority <span class="key">nullable</span>: <span class="predefined-constant">false</span>, <span class="key">unique</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>GORM entities should be annotated with <code>grails.gorm.annotation.Entity</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use of <code>GormEntity</code> to aid IDE support. When used inside a Grails context, some IDEs will use the grails-app/domain location as a hint to enable code completion.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="userrole">UserRole</h5>
<div class="paragraph">
<p>Create a <code>UserRole</code> which stores a many-to-many relationship between <code>User</code> and <code>Role</code>.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/domain/UserRole.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut.domain

<span class="keyword">import</span> <span class="include">grails.gorm.annotation.Entity</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="keyword">import</span> <span class="include">io.micronaut.serde.annotation.Serdeable</span>

<span class="annotation">@Serdeable</span>
<span class="annotation">@Entity</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">UserRole</span> <span class="directive">implements</span> GormEntity&lt;UserRole&gt; { <i class="conum" data-value="2"></i><b>(2)</b>
    User user
    <span class="predefined-type">Role</span> role

    <span class="directive">static</span> constraints = {
        user <span class="key">nullable</span>: <span class="predefined-constant">false</span>
        role <span class="key">nullable</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>GORM entities should be annotated with <code>grails.gorm.annotation.Entity</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use of <code>GormEntity</code> to aid IDE support. When used inside a Grails context, some IDEs will use the grails-app/domain location as a hint to enable code completion.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="data-services">4.2.2. Data Services</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>GORM Data Services take the work out of implementing service layer logic by adding the ability to automatically implement abstract classes or interfaces using GORM logic.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Create various GORM Data services:</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/UserGormService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">example.micronaut.domain.User</span>
<span class="keyword">import</span> <span class="include">grails.gorm.services.Service</span>

<span class="annotation">@Service</span>(User) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">interface</span> UserGormService {

    User save(<span class="predefined-type">String</span> email, <span class="predefined-type">String</span> username, <span class="predefined-type">String</span> password)

    User findByUsername(<span class="predefined-type">String</span> username)

    User findById(<span class="predefined-type">Serializable</span> id)

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id)

    <span class="type">int</span> count()
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate with <code>@Service</code> to designate a <a href="https://gorm.grails.org/latest/hibernate/manual/#dataServices">GORM Data Service</a> which is registered as a <code>Singleton</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/RoleGormService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">example.micronaut.domain.Role</span>
<span class="keyword">import</span> <span class="include">grails.gorm.services.Service</span>

<span class="annotation">@Service</span>(<span class="predefined-type">Role</span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">interface</span> RoleGormService {
    <span class="predefined-type">Role</span> save(<span class="predefined-type">String</span> authority)

    <span class="predefined-type">Role</span> find(<span class="predefined-type">String</span> authority)

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate with <code>@Service</code> to designate a <a href="https://gorm.grails.org/latest/hibernate/manual/#dataServices">GORM Data Service</a> which is registered as a <code>Singleton</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/UserRoleGormService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">example.micronaut.domain.Role</span>
<span class="keyword">import</span> <span class="include">example.micronaut.domain.User</span>
<span class="keyword">import</span> <span class="include">example.micronaut.domain.UserRole</span>
<span class="keyword">import</span> <span class="include">grails.gorm.services.Query</span>
<span class="keyword">import</span> <span class="include">grails.gorm.services.Service</span>

<span class="annotation">@Service</span>(UserRole) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">interface</span> UserRoleGormService {

    UserRole save(User user, <span class="predefined-type">Role</span> role)

    UserRole find(User user, <span class="predefined-type">Role</span> role)

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id)

    <span class="annotation">@Query</span>(<span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">select </span><span class="inline"><span class="inline-delimiter">$</span>r</span><span class="content">.authority
    from </span><span class="inline"><span class="inline-delimiter">${</span>UserRole ur<span class="inline-delimiter">}</span></span><span class="content">
    inner join </span><span class="inline"><span class="inline-delimiter">${</span>User u = ur.user<span class="inline-delimiter">}</span></span><span class="content">
    inner join </span><span class="inline"><span class="inline-delimiter">${</span><span class="predefined-type">Role</span> r = ur.role<span class="inline-delimiter">}</span></span><span class="content">
    where </span><span class="inline"><span class="inline-delimiter">$</span>u</span><span class="content">.username = </span><span class="inline"><span class="inline-delimiter">$</span>username</span><span class="delimiter">&quot;&quot;&quot;</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; findAllAuthoritiesByUsername(<span class="predefined-type">String</span> username)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate with <code>@Service</code> to designate a <a href="https://gorm.grails.org/latest/hibernate/manual/#dataServices">GORM Data Service</a> which is registered as a <code>Singleton</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>GORM allows statically-compiled JPA-QL Queries</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="password-encoder">4.3. Password Encoder</h3>
<div class="paragraph">
<p>Create an interface to handle password encoding:</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/PasswordEncoder.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">io.micronaut.core.annotation.NonNull</span>

<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotBlank</span>

<span class="type">interface</span> PasswordEncoder {
    <span class="predefined-type">String</span> encode(<span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> rawPassword)

    <span class="type">boolean</span> matches(<span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> rawPassword,
                    <span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> encodedPassword)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To provide an implementation, first include a dependency to <a href="https://docs.spring.io/spring-security/site/docs/3.1.x/reference/crypto.html">Spring Security Crypto</a> to ease password encoding.</p>
</div>
<div class="paragraph">
<p>Add the dependency:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.security:spring-security-crypto:@spring-security-cryptoVersion@</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, write the implementation:</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/BCryptPasswordEncoderService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>
<span class="keyword">import</span> <span class="include">io.micronaut.core.annotation.NonNull</span>
<span class="keyword">import</span> <span class="include">org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder</span>
<span class="keyword">import</span> <span class="include">org.springframework.security.crypto.password.PasswordEncoder</span> <span class="keyword">as</span> <span class="class">SpringSecurityPasswordEncoder</span>
<span class="keyword">import</span> <span class="include">jakarta.inject.Singleton</span>
<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotBlank</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Singleton</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">BCryptPasswordEncoderService</span> <span class="directive">implements</span> PasswordEncoder {

    SpringSecurityPasswordEncoder delegate = <span class="keyword">new</span> BCryptPasswordEncoder()

    <span class="predefined-type">String</span> encode(<span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> rawPassword) {
        delegate.encode(rawPassword)
    }

    <span class="annotation">@Override</span>
    <span class="type">boolean</span> matches(<span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> rawPassword,
                    <span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> encodedPassword) {
        delegate.matches(rawPassword, encodedPassword)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use <code>jakarta.inject.Singleton</code> to designate a class as a singleton.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="register-service">4.4. Register Service</h3>
<div class="paragraph">
<p>We will register a user when the application starts up.</p>
</div>
<div class="paragraph">
<p>Create <code>RegisterService</code></p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/RegisterService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">example.micronaut.domain.Role</span>
<span class="keyword">import</span> <span class="include">example.micronaut.domain.User</span>
<span class="keyword">import</span> <span class="include">grails.gorm.transactions.Transactional</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="keyword">import</span> <span class="include">jakarta.inject.Singleton</span>
<span class="keyword">import</span> <span class="include">javax.validation.constraints.Email</span>
<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotBlank</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Singleton</span>
<span class="type">class</span> <span class="class">RegisterService</span> {

    <span class="directive">private</span> <span class="directive">final</span> RoleGormService roleGormService
    <span class="directive">private</span> <span class="directive">final</span> UserGormService userGormService
    <span class="directive">private</span> <span class="directive">final</span> UserRoleGormService userRoleGormService
    <span class="directive">private</span> <span class="directive">final</span> PasswordEncoder passwordEncoder

    RegisterService(RoleGormService roleGormService,
                    UserGormService userGormService,
                    PasswordEncoder passwordEncoder,
                    UserRoleGormService userRoleGormService) {
        <span class="local-variable">this</span>.roleGormService = roleGormService
        <span class="local-variable">this</span>.userGormService = userGormService
        <span class="local-variable">this</span>.userRoleGormService = userRoleGormService
        <span class="local-variable">this</span>.passwordEncoder = passwordEncoder
    }

    <span class="annotation">@Transactional</span>
    <span class="type">void</span> register(<span class="annotation">@Email</span> <span class="predefined-type">String</span> email, <span class="annotation">@NotBlank</span> <span class="predefined-type">String</span> username,
                  <span class="annotation">@NotBlank</span> <span class="predefined-type">String</span> rawPassword, <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; authorities) {

        User user = userGormService.findByUsername(username)
        <span class="keyword">if</span> (!user) {
            <span class="directive">final</span> <span class="predefined-type">String</span> encodedPassword = passwordEncoder.encode(rawPassword)
            user = userGormService.save(email, username, encodedPassword)
        }

        <span class="keyword">if</span> (user &amp;&amp; authorities) {
            <span class="keyword">for</span> (<span class="predefined-type">String</span> authority : authorities) {
                <span class="predefined-type">Role</span> role = roleGormService.find(authority) ?: roleGormService.save(authority)
                userRoleGormService.find(user, role) ?: userRoleGormService.save(user, role)
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Update the <code>Application</code> class to be an event listener, and use <code>RegisterService</code> to create a user:</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/Application.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>
<span class="keyword">import</span> <span class="include">io.micronaut.context.event.ApplicationEventListener</span>
<span class="keyword">import</span> <span class="include">io.micronaut.runtime.Micronaut</span>
<span class="keyword">import</span> <span class="include">io.micronaut.runtime.server.event.ServerStartupEvent</span>
<span class="keyword">import</span> <span class="include">jakarta.inject.Singleton</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Singleton</span>
<span class="type">class</span> <span class="class">Application</span> <span class="directive">implements</span> ApplicationEventListener&lt;ServerStartupEvent&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">private</span> <span class="directive">final</span> RegisterService registerService

    Application(RegisterService registerService) { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="local-variable">this</span>.registerService = registerService
    }

    <span class="annotation">@Override</span>
    <span class="type">void</span> onApplicationEvent(ServerStartupEvent event) { <i class="conum" data-value="1"></i><b>(1)</b>
        registerService.register(<span class="string"><span class="delimiter">'</span><span class="content">sherlock@micronaut.example</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">sherlock</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">elementary</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">ROLE_DETECTIVE</span><span class="delimiter">'</span></span>]) <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        Micronaut.run Application, args
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implements <code>ServerStartupEvent</code> which enables executing a method when the application starts.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use constructor injection to inject a bean of type <code>RegisterService</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Register a new user when the application starts.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="delegating-authentication-provider">4.5. Delegating Authentication Provider</h3>
<div class="paragraph">
<p>We will set up a <a href="https://micronaut-projects.github.io/micronaut-security/latest/api/io/micronaut/security/authentication/AuthenticationProvider.html">AuthenticationProvider</a> a described in the next diagram.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/delegating_authentication_provider.svg" alt="delegating authentication provider">
</div>
</div>
<div class="paragraph">
<p>Next, we create interfaces and implementations for each of the pieces of the previous diagram.</p>
</div>
<div class="sect3">
<h4 id="user-fetcher">4.5.1. User Fetcher</h4>
<div class="paragraph">
<p>Create an interface to retrieve a <code>UserState</code> given a username.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/UserFetcher.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">io.micronaut.core.annotation.NonNull</span>

<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotBlank</span>

<span class="type">interface</span> UserFetcher {
    UserState findByUsername(<span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> username)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Provide an implementation:</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/UserFetcherService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">io.micronaut.core.annotation.NonNull</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="keyword">import</span> <span class="include">jakarta.inject.Singleton</span>
<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotBlank</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Singleton</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">UserFetcherService</span> <span class="directive">implements</span> UserFetcher {

    <span class="directive">private</span> <span class="directive">final</span> UserGormService userGormService

    UserFetcherService(UserGormService userGormService) { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="local-variable">this</span>.userGormService = userGormService
    }

    <span class="annotation">@Override</span>
    UserState findByUsername(<span class="annotation">@NotBlank</span> <span class="annotation">@NonNull</span> <span class="predefined-type">String</span> username) {
        userGormService.findByUsername(username) <span class="keyword">as</span> UserState
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use <code>jakarta.inject.Singleton</code> to designate a class as a singleton.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>UserGormService</code> is injected via constructor injection.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="authorities-fetcher">4.5.2. Authorities Fetcher</h4>
<div class="paragraph">
<p>Create an interface to retrieve roles given a username.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/AuthoritiesFetcher.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="type">interface</span> AuthoritiesFetcher {
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; findAuthoritiesByUsername(<span class="predefined-type">String</span> username)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Provide an implementation:</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/AuthoritiesFetcherService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">jakarta.inject.Singleton</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Singleton</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">AuthoritiesFetcherService</span> <span class="directive">implements</span> AuthoritiesFetcher {

    <span class="directive">private</span> <span class="directive">final</span> UserRoleGormService userRoleGormService

    AuthoritiesFetcherService(UserRoleGormService userRoleGormService) { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="local-variable">this</span>.userRoleGormService = userRoleGormService
    }

    <span class="annotation">@Override</span>
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; findAuthoritiesByUsername(<span class="predefined-type">String</span> username) {
        userRoleGormService.findAllAuthoritiesByUsername(username)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use <code>jakarta.inject.Singleton</code> to designate a class as a singleton.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>UserRoleGormService</code> is injected via constructor injection.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="authentication-provider">4.5.3. Authentication Provider</h4>
<div class="paragraph">
<p>Create an authentication provider which uses the interfaces you wrote in the previous sections.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/example/micronaut/DelegatingAuthenticationProvider.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">io.micronaut.core.annotation.Nullable</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.HttpRequest</span>
<span class="keyword">import</span> <span class="include">io.micronaut.scheduling.TaskExecutors</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.AuthenticationException</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailed</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.AuthenticationProvider</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.AuthenticationRequest</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.AuthenticationResponse</span>
<span class="keyword">import</span> <span class="include">reactor.core.publisher.FluxSink</span>
<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>
<span class="keyword">import</span> <span class="include">reactor.core.scheduler.Scheduler</span>
<span class="keyword">import</span> <span class="include">reactor.core.scheduler.Schedulers</span>
<span class="keyword">import</span> <span class="include">org.reactivestreams.Publisher</span>
<span class="keyword">import</span> <span class="include">jakarta.inject.Named</span>
<span class="keyword">import</span> <span class="include">jakarta.inject.Singleton</span>
<span class="keyword">import</span> <span class="include">java.util.concurrent.ExecutorService</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailureReason.ACCOUNT_EXPIRED</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailureReason.ACCOUNT_LOCKED</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailureReason.CREDENTIALS_DO_NOT_MATCH</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailureReason.PASSWORD_EXPIRED</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailureReason.USER_DISABLED</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.authentication.AuthenticationFailureReason.USER_NOT_FOUND</span>

<span class="annotation">@Singleton</span>
<span class="type">class</span> <span class="class">DelegatingAuthenticationProvider</span> <span class="directive">implements</span> AuthenticationProvider {

    <span class="directive">private</span> <span class="directive">final</span> UserFetcher userFetcher
    <span class="directive">private</span> <span class="directive">final</span> PasswordEncoder passwordEncoder
    <span class="directive">private</span> <span class="directive">final</span> AuthoritiesFetcher authoritiesFetcher
    <span class="directive">private</span> <span class="directive">final</span> Scheduler scheduler

    DelegatingAuthenticationProvider(UserFetcher userFetcher,
                                     PasswordEncoder passwordEncoder,
                                     AuthoritiesFetcher authoritiesFetcher,
                                     <span class="annotation">@Named</span>(TaskExecutors.IO) <span class="predefined-type">ExecutorService</span> executorService) { <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="local-variable">this</span>.userFetcher = userFetcher
        <span class="local-variable">this</span>.passwordEncoder = passwordEncoder
        <span class="local-variable">this</span>.authoritiesFetcher = authoritiesFetcher
        <span class="local-variable">this</span>.scheduler = Schedulers.fromExecutorService(executorService)
    }

    <span class="annotation">@Override</span>
    Publisher&lt;AuthenticationResponse&gt; authenticate(<span class="annotation">@Nullable</span> HttpRequest&lt;?&gt; httpRequest,
                                                   AuthenticationRequest&lt;?, ?&gt; authenticationRequest) {
        Flux.create({ emitter -&gt;
            UserState user = fetchUserState(authenticationRequest)
            AuthenticationFailed authenticationFailed = validate(user, authenticationRequest)
            <span class="keyword">if</span> (authenticationFailed) {
                emitter.error(<span class="keyword">new</span> <span class="exception">AuthenticationException</span>(authenticationFailed))
            } <span class="keyword">else</span> {
                emitter.next(createSuccessfulAuthenticationResponse(user))
                emitter.complete()
            }
        }, FluxSink.OverflowStrategy.ERROR)
                .subscribeOn(scheduler) <i class="conum" data-value="2"></i><b>(2)</b>
    }

    <span class="directive">private</span> AuthenticationFailed validate(UserState user, AuthenticationRequest authenticationRequest) {

        AuthenticationFailed authenticationFailed = <span class="predefined-constant">null</span>
        <span class="keyword">if</span> (!user) {
            authenticationFailed = <span class="keyword">new</span> AuthenticationFailed(USER_NOT_FOUND)

        } <span class="keyword">else</span> <span class="keyword">if</span> (!user.enabled) {
            authenticationFailed = <span class="keyword">new</span> AuthenticationFailed(USER_DISABLED)

        } <span class="keyword">else</span> <span class="keyword">if</span> (user.accountExpired) {
            authenticationFailed = <span class="keyword">new</span> AuthenticationFailed(ACCOUNT_EXPIRED)

        } <span class="keyword">else</span> <span class="keyword">if</span> (user.accountLocked) {
            authenticationFailed = <span class="keyword">new</span> AuthenticationFailed(ACCOUNT_LOCKED)

        } <span class="keyword">else</span> <span class="keyword">if</span> (user.passwordExpired) {
            authenticationFailed = <span class="keyword">new</span> AuthenticationFailed(PASSWORD_EXPIRED)

        } <span class="keyword">else</span> <span class="keyword">if</span> (!passwordEncoder.matches(authenticationRequest.secret.toString(), user.password)) {
            authenticationFailed = <span class="keyword">new</span> AuthenticationFailed(CREDENTIALS_DO_NOT_MATCH)
        }

        authenticationFailed
    }

    <span class="directive">private</span> UserState fetchUserState(AuthenticationRequest authRequest) {
        <span class="directive">final</span> <span class="predefined-type">String</span> username = authRequest.identity
        userFetcher.findByUsername(username)
    }

    <span class="directive">private</span> AuthenticationResponse createSuccessfulAuthenticationResponse(UserState user) {
        <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; authorities = authoritiesFetcher.findAuthoritiesByUsername(user.username)
        AuthenticationResponse.success(user.username, authorities)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The configured I/O executor service is injected</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>subscribeOn</code> method schedules the operation on the I/O thread pool</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is critical that any blocking I/O operations (such as fetching the user from the database in the previous code sample) are offloaded to a separate thread pool that does not block the Event loop.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ldap-authentication-provider-test">4.6. LDAP Authentication Provider test</h3>
<div class="paragraph">
<p>Create a test to verify an LDAP user can log in.</p>
</div>
<div class="listingblock">
<div class="title">src/test/groovy/example/micronaut/LoginLdapSpec.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">io.micronaut.http.HttpRequest</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.HttpResponse</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.client.HttpClient</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.client.annotation.Client</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.client.exceptions.HttpClientResponseException</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.UsernamePasswordCredentials</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.token.jwt.generator.claims.JwtClaims</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.token.jwt.render.AccessRefreshToken</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.token.jwt.validator.JwtTokenValidator</span>
<span class="keyword">import</span> <span class="include">io.micronaut.test.extensions.spock.annotation.MicronautTest</span>
<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>
<span class="keyword">import</span> <span class="include">org.reactivestreams.Publisher</span>
<span class="keyword">import</span> <span class="include">spock.lang.Ignore</span>
<span class="keyword">import</span> <span class="include">spock.lang.Shared</span>
<span class="keyword">import</span> <span class="include">spock.lang.Specification</span>

<span class="keyword">import</span> <span class="include">jakarta.inject.Inject</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.http.HttpMethod.POST</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.http.MediaType.APPLICATION_JSON_TYPE</span>

<span class="annotation">@MicronautTest</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">LoginLdapSpec</span> <span class="directive">extends</span> Specification {

    <span class="annotation">@Inject</span>
    <span class="annotation">@Client</span>(<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>)
    HttpClient client <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Shared</span>
    <span class="annotation">@Inject</span>
    JwtTokenValidator tokenValidator <i class="conum" data-value="3"></i><b>(3)</b>

    <span class="type">void</span> <span class="string"><span class="delimiter">'</span><span class="content">/login with valid credentials returns 200 and access token and refresh token</span><span class="delimiter">'</span></span>() {
        <span class="key">when</span>:
        HttpRequest request = HttpRequest.create(POST, <span class="string"><span class="delimiter">'</span><span class="content">/login</span><span class="delimiter">'</span></span>)
            .accept(APPLICATION_JSON_TYPE)
            .body(<span class="keyword">new</span> UsernamePasswordCredentials(<span class="string"><span class="delimiter">'</span><span class="content">sherlock</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">elementary</span><span class="delimiter">'</span></span>)) <i class="conum" data-value="4"></i><b>(4)</b>
        HttpResponse&lt;AccessRefreshToken&gt; rsp = client.toBlocking().exchange(request, AccessRefreshToken)

        <span class="key">then</span>:
        rsp.status.code == <span class="integer">200</span>
        rsp.body.present
        rsp.body.get().accessToken
    }

    <span class="annotation">@Ignore</span>(<span class="string"><span class="delimiter">'</span><span class="content">TODO fix the timeout issue</span><span class="delimiter">'</span></span>)
    <span class="type">void</span> <span class="string"><span class="delimiter">'</span><span class="content">/login with invalid credentials returns UNAUTHORIZED</span><span class="delimiter">'</span></span>() {
        <span class="key">when</span>:
        HttpRequest request = HttpRequest.create(POST, <span class="string"><span class="delimiter">'</span><span class="content">/login</span><span class="delimiter">'</span></span>)
            .accept(APPLICATION_JSON_TYPE)
            .body(<span class="keyword">new</span> UsernamePasswordCredentials(<span class="string"><span class="delimiter">'</span><span class="content">euler</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">bogus</span><span class="delimiter">'</span></span>)) <i class="conum" data-value="4"></i><b>(4)</b>
        client.toBlocking().exchange(request)

        <span class="key">then</span>:
        HttpClientResponseException e = thrown()
        e.status.code == <span class="integer">401</span> <i class="conum" data-value="5"></i><b>(5)</b>
    }

    <span class="type">void</span> <span class="string"><span class="delimiter">'</span><span class="content">access token contains expiration date</span><span class="delimiter">'</span></span>() {
        <span class="key">when</span>:
        HttpRequest request = HttpRequest.create(POST, <span class="string"><span class="delimiter">'</span><span class="content">/login</span><span class="delimiter">'</span></span>)
            .accept(APPLICATION_JSON_TYPE)
            .body(<span class="keyword">new</span> UsernamePasswordCredentials(<span class="string"><span class="delimiter">'</span><span class="content">sherlock</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">elementary</span><span class="delimiter">'</span></span>)) <i class="conum" data-value="4"></i><b>(4)</b>
        HttpResponse&lt;AccessRefreshToken&gt; rsp = client.toBlocking().exchange(request, AccessRefreshToken)

        <span class="key">then</span>:
        rsp.status.code == <span class="integer">200</span>
        rsp.body.present

        <span class="key">when</span>:
        <span class="predefined-type">String</span> accessToken = rsp.body.get().accessToken

        <span class="key">then</span>:
        accessToken

        <span class="key">when</span>:
        Publisher authentication = tokenValidator.validateToken(accessToken, request) <i class="conum" data-value="6"></i><b>(6)</b>

        <span class="key">then</span>:
        Flux.from(authentication).blockFirst()

        <span class="key">and</span>: <span class="string"><span class="delimiter">'</span><span class="content">access token contains an expiration date</span><span class="delimiter">'</span></span>
        Flux.from(authentication).blockFirst().attributes.get(JwtClaims.EXPIRATION_TIME)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate the class with <code>@MicronautTest</code> so the Micronaut framework will initialize the application context and the embedded server. <a href="https://micronaut-projects.github.io/micronaut-test/latest/guide/">More info</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Inject the <code>HttpClient</code> bean and point it to the embedded server.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Inject the <code>TokenValidator</code> bean.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Creating HTTP Requests is easy thanks to the Micronaut framework fluid API.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>If you attempt to access a secured endpoint without authentication, 401 is returned</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use the <code>tokenValidator</code> bean previously injected.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="login-testing">4.7. Login Testing</h3>
<div class="paragraph">
<p>Test <code>/login</code> endpoint. We verify both LDAP and DB authentication providers work.</p>
</div>
<div class="listingblock">
<div class="title">src/test/groovy/example/micronaut/LoginControllerSpec.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.micronaut

<span class="keyword">import</span> <span class="include">io.micronaut.http.HttpRequest</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.HttpResponse</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.client.HttpClient</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.client.annotation.Client</span>
<span class="keyword">import</span> <span class="include">io.micronaut.http.client.exceptions.HttpClientResponseException</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.Authentication</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.authentication.UsernamePasswordCredentials</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.token.jwt.render.AccessRefreshToken</span>
<span class="keyword">import</span> <span class="include">io.micronaut.security.token.jwt.validator.JwtTokenValidator</span>
<span class="keyword">import</span> <span class="include">io.micronaut.test.extensions.spock.annotation.MicronautTest</span>
<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>
<span class="keyword">import</span> <span class="include">spock.lang.Shared</span>
<span class="keyword">import</span> <span class="include">spock.lang.Specification</span>

<span class="keyword">import</span> <span class="include">jakarta.inject.Inject</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.http.HttpMethod.POST</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.http.MediaType.APPLICATION_JSON_TYPE</span>

<span class="annotation">@MicronautTest</span>
<span class="type">class</span> <span class="class">LoginControllerSpec</span> <span class="directive">extends</span> Specification {

    <span class="annotation">@Inject</span>
    <span class="annotation">@Client</span>(<span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>)
    HttpClient client

    <span class="annotation">@Shared</span>
    <span class="annotation">@Inject</span>
    JwtTokenValidator tokenValidator

    <span class="annotation">@Inject</span>
    UserGormService userGormService

    <span class="type">void</span> <span class="string"><span class="delimiter">'</span><span class="content">attempt to access /login without supplying credentials server responds BAD REQUEST</span><span class="delimiter">'</span></span>() {
        <span class="key">when</span>:
        HttpRequest request = HttpRequest.create(POST, <span class="string"><span class="delimiter">'</span><span class="content">/login</span><span class="delimiter">'</span></span>)
            .accept(APPLICATION_JSON_TYPE)
        client.toBlocking().exchange(request)

        <span class="key">then</span>:
        HttpClientResponseException e = thrown()
        e.status.code == <span class="integer">400</span>
    }

    <span class="type">void</span> <span class="string"><span class="delimiter">'</span><span class="content">/login with valid credentials for a database user returns 200 and access token</span><span class="delimiter">'</span></span>() {
        <span class="key">expect</span>:
        userGormService.count() &gt; <span class="integer">0</span>

        <span class="key">when</span>:
        HttpRequest request = HttpRequest.create(POST, <span class="string"><span class="delimiter">'</span><span class="content">/login</span><span class="delimiter">'</span></span>)
            .accept(APPLICATION_JSON_TYPE)
            .body(<span class="keyword">new</span> UsernamePasswordCredentials(<span class="string"><span class="delimiter">'</span><span class="content">sherlock</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">elementary</span><span class="delimiter">'</span></span>))
        HttpResponse&lt;AccessRefreshToken&gt; rsp = client.toBlocking().exchange(request, AccessRefreshToken)

        <span class="key">then</span>:
        noExceptionThrown()
        rsp.status.code == <span class="integer">200</span>
        rsp.body.present
        rsp.body.get().accessToken

        <span class="key">when</span>:
        <span class="predefined-type">String</span> accessToken = rsp.body.get().accessToken
        Authentication authentication = Flux.from(tokenValidator.validateToken(accessToken, request)).blockFirst()

        <span class="key">then</span>:
        authentication.attributes
        authentication.attributes.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">roles</span><span class="delimiter">'</span></span>)
        authentication.attributes.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">iss</span><span class="delimiter">'</span></span>)
        authentication.attributes.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">exp</span><span class="delimiter">'</span></span>)
        authentication.attributes.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">iat</span><span class="delimiter">'</span></span>)
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-application">5. Testing the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run the tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./gradlew test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then open <code>build/reports/tests/test/index.html</code> in a browser to see the results.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application">6. Running the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run the application, use the <code>./gradlew run</code> command, which starts the application on port 8080.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps">7. Next steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Explore more features with <a href="https://micronaut.io/guides/">Micronaut Guides</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="help-with-the-micronaut-framework">8. Help with the Micronaut Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://micronaut.io/foundation/">Micronaut Foundation</a> sponsored the creation of this Guide. A variety of <a href="https://micronaut.io/commercial-support/">consulting and support services</a> are available.</p>
</div>

            </div>
        </div>
    </div>
</main>

<footer id="footer">
    <div class="container">

        <div class="row">
            <div class="col-sm-5 footer-left">

                <div id="text-14" class="widget widget_text">
                    <div class="textwidget">
                        <p>
                            <img class="alignnone size-medium wp-image-3736" src="./images/micronaut_foundation_horizontal_white.svg" alt="Micronaut Foundation"/>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-sm-7 footer-right">

                <ul class="meta">

                    <li id="menu-item-2895" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2895">
                        <a href="https://micronaut.io/brand-guidelines/">Brand Guidelines</a>
                    </li>
                    <li id="menu-item-2894" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2894">
                        <a href="https://micronaut.io/community-guidelines/">Community Guidelines</a>
                    </li>
                    <li id="menu-item-3377" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-3377">
                        <a href="https://micronaut.io/privacy-policy/">Privacy Policy</a>
                    </li>

                </ul>

                <div id="nav_menu-2" class="widget widget_nav_menu">
                    <div class="menu-links-container">
                        <ul id="menu-links" class="menu">
                            <li class="menu-item menu-item-type-custom menu-item-object-custom "><a href="https://micronautpodcast.com"><i class="fa fa-podcast"><span class="sr-only">Podcast</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom "><a href="https://micronaut.io/feed/rss/"><i class="fa fa-feed"><span class="sr-only">Feed</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom "><a href="mailto:info@micronaut.io"><i class="fas fa-envelope"><span class="sr-only">Mail</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://twitter.com/micronautfw"><i class="fab fa-twitter"><span class="sr-only">Twitter</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://matrix.to/#/#micronautfw_questions:gitter.im"><i class="fab fa-gitter"><span class="sr-only">Gitter</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/micronaut-projects/"><i class="fab fa-github"><span class="sr-only">GitHub</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.youtube.com/@MicronautFramework"><i class="fab fa-youtube"><span class="sr-only">YouTube</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.linkedin.com/showcase/micronaut"><i class="fab fa-linkedin"><span class="sr-only">LinkedIn</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.twitch.tv/micronautfw"><i class="fab fa-twitch"><span class="sr-only">Twitch</span></i></a></li>
                        </ul>
                    </div>
                </div>
                <div id="text-5" class="widget widget_text">
                    <div class="textwidget">
                        <p>
                            <small>© 2023 MICRONAUT FOUNDATION. ALL RIGHTS RESERVED</small>
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</footer>
</body>
</html>
