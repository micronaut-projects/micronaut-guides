<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1'/>
    <title>Client Credentials Flow with  Micronaut and Amazon Cognito</title>
    <link rel='stylesheet' id='wp-block-library-css' href='https://micronaut.io/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all'/>
    <link rel='stylesheet' id='fonts-fira-sans-css' href='https://fonts.googleapis.com/css2?family=Fira+Sans%3Awght%40300%3B500&#038;display=swap&#038;ver=5.7' type='text/css' media='all'/>
    <link rel='stylesheet' id='micronaut-style-css' href='https://micronaut.io/wp-content/themes/micronaut/style.min.css' type='text/css' media='all'/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="https://micronaut.io/wp-content/uploads/2021/02/favicon.ico" type="image/png">
    <link rel="shortcut icon" href="https://micronaut.io/wp-content/uploads/2021/02/favicon.ico" type="image/png">
    <link rel="alternate" type="application/rss+xml" title="Micronaut Guides RSS Feed" href="https://guides.micronaut.io/latest/rss.xml" />
    <link rel="alternate" type="application/json" title="Micronaut Guides JSON Feed" href="https://guides.micronaut.io/latest/feed.json" />
    <link href="coderay.css" rel="stylesheet" />
    <link href="guide.css" rel="stylesheet" />
    <script src="lunr.js"></script>
    <script src="guide.js"></script>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://guides.micronaut.io/latest/images/cards/micronaut-oauth2-client-credentials-cognito.png"/>
    <meta name="twitter:creator" content="@micronautfw"/>
    <meta name="twitter:site" content="@micronautfw"/>
    <meta name="twitter:title" content="Client Credentials Flow with  Micronaut and Amazon Cognito"/>
    <meta name="twitter:description" content="Learn how to use Client Credentials Flow between Micronaut microservices with an Authorization Server provided by Amazon Cognito."/>
</head>
<body class="page-template page-template-page-sidebar page-template-page-sidebar-php page page-parent guide">

<header id="header">

    <div class="container">

        <nav class="navbar navbar-expand-lg navbar-dark">

            <button class="collapsed" type="button" data-toggle="collapse" data-target="#nav" aria-expanded="false">
                <span></span>
            </button>

            <a class="navbar-brand" href="https://micronaut.io">
                <img src="https://micronaut.io/wp-content/uploads/2020/11/MIcronautLogo_Horizontal.svg" alt="Micronaut framework"/>
            </a>

            <div class="collapse navbar-collapse" id="nav">

                <ul class="navbar-nav ml-auto">

                    <li id="menu-item-2865" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2865 nav-item"><a href="https://micronaut.io/download/" class="nav-link">Download</a></li>
                    <li id="menu-item-2868" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2868 dropdown nav-item"><a href="https://micronaut.io/learn/" class="nav-link dropdown-toggle" data-toggle="dropdown">Learn</a><ul class="dropdown-menu">
                        <li id="menu-item-4943" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4943"><a href="https://micronaut.io/learn/" class="dropdown-item">Overview</a></li>
                        <li id="menu-item-5111" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5111"><a href="https://docs.micronaut.io/index.html" class="dropdown-item">User Documentaton</a></li>
                        <li id="menu-item-4510" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4510"><a href="https://micronaut.io/guides/" class="dropdown-item">Guides</a></li>
                        <li id="menu-item-2896" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2896"><a href="https://micronaut.io/category/microcast/" class="dropdown-item">Microcasts</a></li>
                        <li id="menu-item-2897" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2897"><a href="https://micronaut.io/category/webinar/" class="dropdown-item">Webinars</a></li>
                        <li id="menu-item-2871" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2871"><a href="https://micronaut.io/professional-training/" class="dropdown-item">Professional Training</a></li>
                        <li id="menu-item-6526" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6526"><a href="https://micronaut-projects.github.io/micronaut-guides-mn3/latest/" class="dropdown-item">Guides for Micronaut Framework 3</a></li>
                    </ul>
                    </li>
                    <li id="menu-item-2878" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2878 dropdown nav-item"><a href="https://micronaut.io/resources/" class="nav-link dropdown-toggle" data-toggle="dropdown">Resources</a><ul class="dropdown-menu">
                        <li id="menu-item-4999" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4999"><a href="https://micronaut.io/upcoming-events/" class="dropdown-item">Upcoming Events</a></li>
                        <li id="menu-item-2879" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2879"><a href="https://micronaut.io/blog/" class="dropdown-item">Blog</a></li>
                        <li id="menu-item-6478" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6478"><a href="https://micronaut.io/category/release-announcements/" class="dropdown-item">Releases</a></li>
                        <li id="menu-item-6715" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6715"><a href="https://micronaut.io/category/security-announcements/" class="dropdown-item">Security Announcements</a></li>
                        <li id="menu-item-4499" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4499"><a href="https://micronautpodcast.com/" class="dropdown-item">Podcast</a></li>
                        <li id="menu-item-5798" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5798"><a href="https://micronaut.io/support/" class="dropdown-item">Commercial Support</a></li>
                        <li id="menu-item-4186" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4186"><a href="https://micronaut.io/resources/community-support/" class="dropdown-item">Community Support</a></li>
                        <li id="menu-item-2882" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2882"><a href="https://micronaut.io/faq/" class="dropdown-item">FAQ</a></li>
                        <li id="menu-item-2883" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2883"><a href="https://micronaut.io/contact/" class="dropdown-item">Contact</a></li>
                        <li id="menu-item-6479" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6479"><a href="https://micronaut.io/micronaut-success-stories/" class="dropdown-item">Micronaut Success Stories</a></li>
                    </ul>
                    </li>
                    <li id="menu-item-2872" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2872 dropdown nav-item"><a href="https://micronaut.io/foundation/" class="nav-link dropdown-toggle" data-toggle="dropdown">Foundation</a><ul class="dropdown-menu">
                        <li id="menu-item-2877" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2877"><a href="https://micronaut.io/foundation/" class="dropdown-item">Overview</a></li>
                        <li id="menu-item-2874" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2874"><a href="https://micronaut.io/foundation/corporate-sponsorship/" class="dropdown-item">Corporate Sponsorship</a></li>
                        <li id="menu-item-2873" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2873"><a href="https://micronaut.io/foundation/community-sponsorship/" class="dropdown-item">Community Sponsorship</a></li>
                        <li id="menu-item-2876" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2876"><a href="https://micronaut.io/foundation/sponsors/" class="dropdown-item">Sponsors</a></li>
                        <li id="menu-item-3838" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3838"><a href="https://micronaut.io/meeting-minutes/" class="dropdown-item">Meeting Minutes</a></li>
                    </ul>
                    </li>
                    <li id="menu-item-2884" class="action menu-item menu-item-type-custom menu-item-object-custom menu-item-2884 nav-item"><a target="_blank" rel="noopener" href="https://micronaut.io/launch/" class="nav-link">Launch</a></li>

                </ul>

            </div>

        </nav>

    </div>
</header>

<div style="background: #fff;padding-top: 20px;padding-bottom: 20px;">
    <div class="container" style="clear: both;">
        <fieldset style="float: right;">
            <input type="search" id="search-form-query"/>
            <input type="submit" onclick="search()" value="Search">
            <input type="submit" onclick="resetSearch()" value="Reset">
        </fieldset>
    </div>
    <div class="container" style="clear: both;margin-top: -20px;">
        <div class="guide-list" id="searchResults">
        </div>
    </div>
</div>
<div id="breadcrumbs"><div class="container"><a href="https://micronaut.io/">Home</a> » <a href="./index.html">Guides</a> » <a href="micronaut-oauth2-client-credentials-cognito.html">Client Credentials Flow with  Micronaut and Amazon Cognito</a> » <span class="breadcrumb_last" aria-current="page">gradle | java</span></div></div><!-- .breadcrumbs -->
<main id="main">
    <div class="container">
        <div class="row">
            <div class="col-md-4">

                <div class="toc">
                    <div class="inner">
                        <h1 class="title title_large first-word-bold first-word-break">Table of Contents</h1>
                        <div class="underline"></div>
                        
<ul class="sectlevel1">
<li><a href="#getting-started">1. Getting Started</a></li>
<li><a href="#what-you-will-need">2. What you will need</a></li>
<li><a href="#solution">3. Solution</a></li>
<li><a href="#application-diagram">4. Application Diagram</a></li>
<li><a href="#oauth-2-0">5. OAuth 2.0</a>
<ul class="sectlevel2">
<li><a href="#add-a-domain">5.1. Add a domain</a></li>
<li><a href="#using-the-aws-cli">5.2. Using the AWS CLI</a></li>
<li><a href="#resource-server">5.3. Resource server</a></li>
</ul>
</li>
<li><a href="#writing-the-application">6. Writing the Application</a>
<ul class="sectlevel2">
<li><a href="#dependencies">6.1. Dependencies</a></li>
<li><a href="#changes-to-book-inventory-service">6.2. Changes to Book Inventory service</a></li>
<li><a href="#changes-to-book-catalogue-service">6.3. Changes to Book Catalogue service</a></li>
<li><a href="#changes-to-book-recommendations-service">6.4. Changes to Book Recommendations service</a></li>
<li><a href="#configuration">6.5. Configuration</a></li>
</ul>
</li>
<li><a href="#running-the-application">7. Running the Application</a>
<ul class="sectlevel2">
<li><a href="#run-bookcatalogue-microservice">7.1. Run <code>bookcatalogue</code> microservice</a></li>
<li><a href="#run-bookinventory-microservice">7.2. Run <code>bookinventory</code> microservice</a></li>
<li><a href="#run-bookrecommendation-microservice">7.3. Run <code>bookrecommendation</code> microservice</a></li>
</ul>
</li>
<li><a href="#generate-a-micronaut-application-native-executable-with-graalvm">8. Generate a Micronaut Application Native Executable with GraalVM</a>
<ul class="sectlevel2">
<li><a href="#graalvm-installation">8.1. GraalVM Installation</a></li>
<li><a href="#native-executable-generation">8.2. Native Executable Generation</a></li>
</ul>
</li>
<li><a href="#next-steps">9. Next Steps</a></li>
<li><a href="#help-with-the-micronaut-framework">10. Help with the Micronaut Framework</a></li>
<li><a href="#license">11. License</a></li>
</ul>

                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <h1>Client Credentials Flow with  Micronaut and Amazon Cognito</h1>
                <div class="underline"></div>
<div class="sect1">
<div class="sectionbody">

<div class="paragraph">
<p>Learn how to use Client Credentials Flow between Micronaut microservices with an Authorization Server provided by Amazon Cognito.</p>
</div>
<div class="paragraph">
<p>Authors: Sergio del Amo</p>
</div>
<div class="paragraph">
<p>Micronaut Version: 4.9.1</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started">1. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide, we will create a Micronaut application written in Java.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-will-need">2. What you will need</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE (e.g. <a href="https://guides.micronaut.io/latest/micronaut-intellij-idea-ide-setup.html">IntelliJ IDEA</a>)</p>
</li>
<li>
<p>JDK 21 or greater installed with <code>JAVA_HOME</code> <a href="https://www.baeldung.com/java-home-on-windows-7-8-10-mac-os-x-linux">configured appropriately</a></p>
</li>
<li>
<p>An <a href="https://aws.amazon.com/cognito/">Amazon Cognito</a> account.</p>
</li>
</ul>
</div>
</div>
</div>
</div></div><div class="row"><div class="col-md-12"><div class="sect1">
<h2 id="solution">3. Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you follow the instructions in the next sections and create the application step by step. However, you can go right to the <strong>completed example</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="micronaut-oauth2-client-credentials-cognito-gradle-java.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application-diagram">4. Application Diagram</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download the complete solution of the <a href="micronaut-microservices-services-discover-consul.html">Consul and Micronaut Framework - Microservices Service Discovery</a> guide. You will use the sample app as a starting point. The application contains three microservices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bookcatalogue</code> - Returns a list of books. It uses a domain consisting of a book name and an ISBN.</p>
</li>
<li>
<p><code>bookinventory</code> - Exposes an endpoint to check whether a book has sufficient stock to fulfill an order. It uses a domain consisting of a stock level and an ISBN.</p>
</li>
<li>
<p><code>bookrecommendation</code> - Consumes previous services and exposes an endpoint that recommends book names that are in stock.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>bookcatalogue</code> service consumes endpoints exposed by the other services. The following image illustrates the original application flow:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/flow.svg" alt="flow">
</div>
</div>
<div class="paragraph">
<p>A request to <code>bookrecommendation</code> (<code><a href="http://localhost:8080/books" class="bare">http://localhost:8080/books</a></code>) triggers several requests through our microservices mesh.</p>
</div>
<div class="paragraph">
<p>In this guide, you are going to secure the communication between the microservices. You will use a client credentials flow and obtain an access token from an <code>Amazon Cognito</code> authorization server.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/flow-client-credentials-cognito.svg" alt="flow client credentials cognito">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oauth-2-0">5. OAuth 2.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To provide authentication, sign in to your <a href="https://aws.amazon.com">AWS</a> account and go to <a href="https://aws.amazon.com/cognito">AWS Cognito</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>With the Amazon Cognito SDK, you just write a few lines of code to enable your users to sign-up and sign-in to your mobile and web apps.</p>
</div>
<div class="paragraph">
<p><strong>Standards-based authentication</strong></p>
</div>
<div class="paragraph">
<p>Amazon Cognito uses common identity management standards including OpenID Connect, OAuth 2.0, and SAML 2.0.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>First, create an Amazon Cognito User Pool:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Amazon Cognito User Pools - A directory for all your users</strong></p>
</div>
<div class="paragraph">
<p>You can quickly create your own directory to sign up and sign in users, and to store user profiles using Amazon Cognito User Pools. User Pools provide a user interface you can customize to match your application. User Pools also enable easy integration with social identity providers such as Facebook, Google, and Amazon, and enterprise identity providers such as Microsoft Active Directory through SAML.</p>
</div>
</blockquote>
</div>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-1.png" alt="aws cognito 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-2.png" alt="aws cognito 2">
</div>
</div>
<div class="paragraph">
<p>Amazon Cognito Pools are regional. Thus, annotate the region you are using.</p>
</div>
<div class="paragraph">
<p>While you setup the Amazon Cognito User Pool, you will need to save the pool id:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-3.png" alt="aws cognito 3">
</div>
</div>
<div class="paragraph">
<p>Save the client id and client secret:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-4.png" alt="aws cognito 4">
</div>
</div>
<div class="sect2">
<h3 id="add-a-domain">5.1. Add a domain</h3>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-domain.png" alt="aws cognito domain">
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-aws-cli">5.2. Using the AWS CLI</h3>
<div class="paragraph">
<p>Some of the following commands use <a href="https://stedolan.github.io/jq/"><code>jq</code></a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>jq is a lightweight and flexible command-line JSON processor</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Alternatively, you can use the AWS CLI to create the user pool and client (change the region to your desired value):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">export COGNITO_REGION=eu-west-1
export COGNITO_POOL_ID=$(aws cognito-idp create-user-pool --pool-name &quot;Micronaut Guides&quot; --username-attributes &quot;email&quot; --auto-verified-attributes &quot;email&quot; | jq -r '.UserPool.Id')
export OAUTH_CLIENT_ID=$(aws cognito-idp create-user-pool-client --generate-secret --user-pool-id $COGNITO_POOL_ID --client-name &quot;AWS Cognito Micronaut Tutorial&quot; --callback-urls &quot;http://localhost:8080/oauth/callback/cognito&quot; --logout-urls &quot;http://localhost:8080/logout&quot; --supported-identity-providers COGNITO --allowed-o-auth-flows &quot;code&quot; --allowed-o-auth-scopes &quot;phone&quot; &quot;email&quot; &quot;openid&quot; &quot;profile&quot; &quot;aws.cognito.signin.user.admin&quot; --allowed-o-auth-flows-user-pool-client | jq -r '.UserPoolClient.ClientId')
export OAUTH_CLIENT_SECRET=$(aws cognito-idp describe-user-pool-client --user-pool-id $COGNITO_POOL_ID --client-id $OAUTH_CLIENT_ID | jq -r '.UserPoolClient.ClientSecret')
export COGNITO_DOMAIN=&quot;micronaut-guides-$RANDOM&quot;
aws cognito-idp create-user-pool-domain --domain $COGNITO_DOMAIN --user-pool-id $COGNITO_POOL_ID</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resource-server">5.3. Resource server</h3>
<div class="paragraph">
<p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-define-resource-servers.html">Define a Resource Server for the User Pool</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-resource-server.png" alt="aws cognito resource server">
</div>
</div>
<div class="paragraph">
<p>In the <code>App Client Settings</code>, define <code>Client Credentials</code> as the selected OAuth 2.0 flow and check the custom scope you created in the previous step:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/aws-cognito-app-client-settings-client-credentials-custom-scopes.png" alt="aws cognito app client settings client credentials custom scopes">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="writing-the-application">6. Writing the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://guides.micronaut.io/latest/micronaut-intellij-idea-ide-setup.html">Setup IntelliJ IDEA to develop Micronaut Applications</a>.</p>
</div>
<div class="sect2">
<h3 id="dependencies">6.1. Dependencies</h3>
<div class="paragraph">
<p>Modify every application (<code>bookinventory</code>, <code>bookinventory</code>, and <code>bookrecommendation</code>). Add <a href="https://micronaut-projects.github.io/micronaut-security/latest/guide/index.html#jwt">Micronaut JWT</a> and <a href="https://micronaut-projects.github.io/micronaut-security/latest/guide/#oauth">Micronaut OAuth 2.0</a> dependencies:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">io.micronaut.security:micronaut-security-oauth2</span><span class="delimiter">&quot;</span></span>)
implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">io.micronaut.security:micronaut-security-jwt</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-to-book-inventory-service">6.2. Changes to Book Inventory service</h3>
<div class="paragraph">
<p>Annotate the Controller&#8217;s method with <code>@Secured</code>:</p>
</div>
<div class="listingblock">
<div class="title">bookinventory/src/main/java/example/micronaut/BooksController.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">example.micronaut</span>;

<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Get</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Produces</span>;
<span class="keyword">import</span> <span class="include">jakarta.validation.constraints.NotBlank</span>;
<span class="keyword">import</span> <span class="include">java.util.Optional</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.http.MediaType.TEXT_PLAIN</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.rules.SecurityRule.IS_AUTHENTICATED</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.security.annotation.Secured</span>;

<span class="annotation">@Controller</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BooksController</span> {

    <span class="annotation">@Produces</span>(TEXT_PLAIN)
    <span class="annotation">@Get</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/stock/{isbn}</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Secured</span>(IS_AUTHENTICATED) <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> <span class="predefined-type">Boolean</span> stock(<span class="annotation">@NotBlank</span> <span class="predefined-type">String</span> isbn) {
        <span class="keyword">return</span> bookInventoryByIsbn(isbn).map(bi -&gt; bi.getStock() &gt; <span class="integer">0</span>).orElse(<span class="predefined-constant">null</span>);
    }

    <span class="directive">private</span> Optional&lt;BookInventory&gt; bookInventoryByIsbn(<span class="predefined-type">String</span> isbn) {
        <span class="keyword">if</span> (isbn.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">1491950358</span><span class="delimiter">&quot;</span></span>)) {
            <span class="keyword">return</span> Optional.of(<span class="keyword">new</span> BookInventory(isbn, <span class="integer">4</span>));
        }
        <span class="keyword">if</span> (isbn.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">1680502395</span><span class="delimiter">&quot;</span></span>)) {
            <span class="keyword">return</span> Optional.of(<span class="keyword">new</span> BookInventory(isbn, <span class="integer">0</span>));
        }
        <span class="keyword">return</span> Optional.empty();
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate with <code>io.micronaut.security.Secured</code> to configure secured access. The <code>SecurityRule.IS_AUTHENTICATED</code> expression allows only access to authenticated users.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To validate the tokens issued by Amazon Cognito, configure <a href="https://micronaut-projects.github.io/micronaut-security/latest/guide/#jwks">Validation with Remote JWKS</a>:</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<a href="https://micronaut.io/2023/02/19/micronaut-framework-4-0-and-snakeyaml-transitive-dependency/">Since Micronaut Framework 4.0, to use YAML configuration, you have to add the YAML dependency</a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">bookinventory/src/main/resources/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">micronaut</span>:
  <span class="key">security</span>:
    <span class="key">token</span>:
      <span class="key">jwt</span>:
        <span class="key">signatures</span>:
          <span class="key">jwks</span>:
            <span class="key">auth0</span>:
              <span class="key">url</span>: <span class="string"><span class="content">'https://cognito-idp.${COGNITO_REGION:us-east-1}.amazonaws.com/${COGNITO_POOL_ID:us-east-1_blablabla}/.well-known/jwks.json'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can obtain the JWKS URL in the <code>https://cognito-idp.${COGNITO_REGION}.amazonaws.com/${COGNITO_POOL_ID}/.well-known/openid-configuration</code> endpoint.</p>
</div>
</div>
<div class="sect2">
<h3 id="changes-to-book-catalogue-service">6.3. Changes to Book Catalogue service</h3>
<div class="paragraph">
<p>Annotate the Controller&#8217;s method with <code>@Secured</code>:</p>
</div>
<div class="listingblock">
<div class="title">bookcatalogue/src/main/java/example/micronaut/BooksController.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">example.micronaut</span>;

<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Get</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.security.annotation.Secured</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.rules.SecurityRule.IS_AUTHENTICATED</span>;
<span class="keyword">import</span> <span class="include">java.util.Arrays</span>;
<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="annotation">@Controller</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BooksController</span> {

    <span class="annotation">@Get</span>
    <span class="annotation">@Secured</span>(IS_AUTHENTICATED) <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Book</span>&gt; index() {
        <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(
                <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">1491950358</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Building Microservices</span><span class="delimiter">&quot;</span></span>),
                <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">1680502395</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Release It!</span><span class="delimiter">&quot;</span></span>),
                <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">0321601912</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Continuous Delivery:</span><span class="delimiter">&quot;</span></span>)
        );
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate with <code>io.micronaut.security.Secured</code> to configure secured access. The <code>SecurityRule.IS_AUTHENTICATED</code> expression allows only access to authenticated users.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To validate the tokens issued by Cognito, configure <a href="https://micronaut-projects.github.io/micronaut-security/latest/guide/#jwks">Validation with Remote JWKS</a>:</p>
</div>
<div class="listingblock">
<div class="title">bookcatalogue/src/main/resources/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">micronaut</span>:
  <span class="key">security</span>:
    <span class="key">token</span>:
      <span class="key">jwt</span>:
        <span class="key">signatures</span>:
          <span class="key">jwks</span>:
            <span class="key">auth0</span>:
              <span class="key">url</span>: <span class="string"><span class="content">'https://cognito-idp.${COGNITO_REGION:us-east-1}.amazonaws.com/${COGNITO_POOL_ID:us-east-1_blablabla}/.well-known/jwks.json'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can obtain the JWKS URL in the <code>https://cognito-idp.${COGNITO_REGION}.amazonaws.com/${COGNITO_POOL_ID}/.well-known/openid-configuration</code> endpoint.</p>
</div>
</div>
<div class="sect2">
<h3 id="changes-to-book-recommendations-service">6.4. Changes to Book Recommendations service</h3>
<div class="sect3">
<h4 id="books-controller-security">6.4.1. Books Controller security</h4>
<div class="paragraph">
<p>The <code>GET /books</code> in the <code>booksrecommendation</code> service is open.</p>
</div>
<div class="paragraph">
<p>Annotate the Controller&#8217;s method with <code>@Secured</code>:</p>
</div>
<div class="listingblock">
<div class="title">bookrecommendation/src/main/java/example/micronaut/BookController.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">example.micronaut</span>;

<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.http.annotation.Get</span>;
<span class="keyword">import</span> <span class="include">org.reactivestreams.Publisher</span>;
<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.micronaut.security.rules.SecurityRule.IS_ANONYMOUS</span>;
<span class="keyword">import</span> <span class="include">io.micronaut.security.annotation.Secured</span>;

<span class="annotation">@Controller</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookController</span> {

    <span class="directive">private</span> <span class="directive">final</span> BookCatalogueOperations bookCatalogueOperations;
    <span class="directive">private</span> <span class="directive">final</span> BookInventoryOperations bookInventoryOperations;

    <span class="directive">public</span> BookController(BookCatalogueOperations bookCatalogueOperations,
                          BookInventoryOperations bookInventoryOperations) { 
        <span class="local-variable">this</span>.bookCatalogueOperations = bookCatalogueOperations;
        <span class="local-variable">this</span>.bookInventoryOperations = bookInventoryOperations;
    }

    <span class="annotation">@Get</span>
    <span class="annotation">@Secured</span>(IS_ANONYMOUS) <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> Publisher&lt;BookRecommendation&gt; index() {
        <span class="keyword">return</span> Flux.from(bookCatalogueOperations.findAll())
                .flatMap(b -&gt; Flux.from(bookInventoryOperations.stock(b.getIsbn()))
                        .filter(<span class="predefined-type">Boolean</span>::booleanValue)
                        .map(rsp -&gt; b)
                ).map(book -&gt; <span class="keyword">new</span> BookRecommendation(book.getName()));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Annotate with <code>io.micronaut.security.Secured</code> to configure secured access. The <code>SecurityRule.IS_ANONYMOUS</code> expression will allow access without authentication.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configuration-of-http-services-urls">6.4.2. Configuration of HTTP services URLs</h4>
<div class="paragraph">
<p>Modify <code>application-dev.yml</code> to point the declarative HTTP clients to the other microservices URLs.</p>
</div>
<div class="listingblock">
<div class="title">bookrecommendation/src/main/resources/application-dev.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">micronaut</span>:
  <span class="key">http</span>:
    <span class="key">services</span>:
      <span class="key">bookcatalogue</span>:
        <span class="key">url</span>: <span class="string"><span class="content">'http://localhost:8081'</span></span>
      <span class="key">bookinventory</span>:
        <span class="key">url</span>: <span class="string"><span class="content">'http://localhost:8082'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration">6.5. Configuration</h3>
<div class="paragraph">
<p>Add the following OAuth2 configuration:</p>
</div>
<div class="listingblock">
<div class="title">bookrecommendation/src/main/resources/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">micronaut</span>:
  <span class="key">security</span>:
    <span class="key">oauth2</span>:
      <span class="key">clients</span>:
        <span class="key">cognito</span>: <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="key">client-id</span>: <span class="string"><span class="content">'${OAUTH_CLIENT_ID:xxx}' </span></span><i class="conum" data-value="2"></i><b>(2)</b>
          <span class="key">client-secret</span>: <span class="string"><span class="content">'${OAUTH_CLIENT_SECRET:yyy}' </span></span><i class="conum" data-value="3"></i><b>(3)</b>
          <span class="key">grant-type</span>: <span class="string"><span class="content">client_credentials </span></span><i class="conum" data-value="4"></i><b>(4)</b>
          <span class="key">token</span>:
            <span class="key">url</span>: <span class="string"><span class="content">'${OAUTH_TOKEN_URL:`https://micronautguide.auth.us-east-1.amazoncognito.com/oauth2/token`}' </span></span><i class="conum" data-value="5"></i><b>(5)</b>
            <span class="key">auth-method</span>: <span class="string"><span class="content">client_secret_basic </span></span><i class="conum" data-value="6"></i><b>(6)</b>
          <span class="key">client-credentials</span>:
            <span class="key">service-id-regex</span>: <span class="string"><span class="content">'bookcatalogue|bookinventory' </span></span><i class="conum" data-value="7"></i><b>(7)</b>
            <span class="key">scope</span>: <span class="string"><span class="content">'example.micronaut.books/books.read' </span></span><i class="conum" data-value="8"></i><b>(8)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>OAuth 2.0 Client name.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Client ID. See previous screenshot.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Client Secret. See previous screenshot.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify <a href="https://micronaut-projects.github.io/micronaut-security/latest/api/index.html">GrantType#CLIENT_CREDENTIALS</a> as grant type for this OAuth 2.0 client.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specify the token endpoint URL. You can obtain the token endpoint URL in the <code>https://cognito-idp.${COGNITO_REGION}.amazonaws.com/${COGNITO_POOL_ID}/.well-known/openid-configuration</code> OpenID auto-configuration endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Specify <a href="https://micronaut-projects.github.io/micronaut-security/latest/api/index.html">AuthenticationMethod#CLIENT_SECRET_BASIC</a> as the authentication method. This means that basic authentication with client id as username and client secret as password is used for the HTTP request sent to the token endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Propagate the access token obtained from Amazon Cognito to requests sent to the services <code>bookinventory</code> and <code>bookcatalogue</code>. This uses the <a href="https://micronaut-projects.github.io/micronaut-security/latest/api/index.html">Micronaut Client Credentials HTTP Client Filter</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Request the custom scope that you set in Amazon Cognito Resource Groups.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The previous configuration uses several placeholders with default values. You will need to set up your Amazon Cognito application&#8217;s <code>OAUTH_CLIENT_ID</code>, <code>OAUTH_CLIENT_SECRET</code>, and <code>OAUTH_TOKEN_URL</code> environment variables.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-application">7. Running the Application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="run-bookcatalogue-microservice">7.1. Run <code>bookcatalogue</code> microservice</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">export COGNITO_REGION=us-east-1
export COGNITO_POOL_ID=us-east-1_blablabla</code></pre>
</div>
</div>
<div class="paragraph">
<p>To run the application, execute <code>./gradlew run</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">...
14:28:34.034 [main] INFO  io.micronaut.runtime.Micronaut - Startup completed in 499ms. Server Running: http://localhost:8081</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-bookinventory-microservice">7.2. Run <code>bookinventory</code> microservice</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">export COGNITO_REGION=us-east-1
export COGNITO_POOL_ID=us-east-1_blablabla</code></pre>
</div>
</div>
<div class="paragraph">
<p>To run the application, execute <code>./gradlew run</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">...
14:31:13.104 [main] INFO  io.micronaut.runtime.Micronaut - Startup completed in 506ms. Server Running: http://localhost:8082</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-bookrecommendation-microservice">7.3. Run <code>bookrecommendation</code> microservice</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">export OAUTH_CLIENT_ID=XXXXXXXXXX
export OAUTH_CLIENT_SECRET=YYYYYYYYYY
export OAUTH_TOKEN_URL=https://micronautguide.auth.us-east-1.amazoncognito.com/oauth2/token</code></pre>
</div>
</div>
<div class="paragraph">
<p>To run the application, execute <code>./gradlew run</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">...
14:31:57.389 [main] INFO  io.micronaut.runtime.Micronaut - Startup completed in 523ms. Server Running: http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can run a cURL command to test the whole application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl http://localhost:8080/books</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[{<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Building Microservices</span><span class="delimiter">&quot;</span></span>}]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-a-micronaut-application-native-executable-with-graalvm">8. Generate a Micronaut Application Native Executable with GraalVM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will use <a href="https://www.graalvm.org/">GraalVM</a>, an advanced JDK with ahead-of-time Native Image compilation, to generate a native executable of this Micronaut application.</p>
</div>
<div class="paragraph">
<p>Compiling Micronaut applications ahead of time with GraalVM significantly improves startup time and reduces the memory footprint of JVM-based applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Only Java and Kotlin projects support using GraalVM&#8217;s <code>native-image</code> tool. Groovy relies heavily on reflection, which is only partially supported by GraalVM.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="graalvm-installation">8.1. GraalVM Installation</h3>
<div class="paragraph">
<p>The easiest way to install <a href="https://www.graalvm.org">GraalVM</a> on Linux or Mac is to use <a href="https://sdkman.io/">SDKMan.io</a>.</p>
</div>
<div class="listingblock">
<div class="title">Java 21</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sdk install java 21.0.5-graal</code></pre>
</div>
</div>
<div class="paragraph">
<p>For installation on Windows, or for a manual installation on Linux or Mac, see the <a href="https://www.graalvm.org/latest/docs/getting-started/">GraalVM Getting Started</a> documentation.</p>
</div>
<div class="paragraph">
<p>The previous command installs Oracle GraalVM, which is free to use in production and free to redistribute, at no cost, under the <a href="https://www.oracle.com/downloads/licenses/graal-free-license.html">GraalVM Free Terms and Conditions</a>.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can use the <a href="https://github.com/graalvm/graalvm-ce-builds/releases/">GraalVM Community Edition</a>:</p>
</div>
<div class="listingblock">
<div class="title">Java 21</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sdk install java 21.0.2-graalce</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="native-executable-generation">8.2. Native Executable Generation</h3>
<div class="paragraph">
<p>To generate a native executable using Gradle, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./gradlew nativeCompile</code></pre>
</div>
</div>
<div class="paragraph">
<p>The native executable is created in <code>build/native/nativeCompile</code> directory and can be run with <code>build/native/nativeCompile/micronautguide</code>.</p>
</div>
<div class="paragraph">
<p>It is possible to customize the name of the native executable or pass additional parameters to GraalVM:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">graalvmNative {
    binaries {
        main {
            imageName.set(<span class="string"><span class="delimiter">'</span><span class="content">mn-graalvm-application</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
            buildArgs.add(<span class="string"><span class="delimiter">'</span><span class="content">-Ob</span><span class="delimiter">'</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The native executable name will now be <code>mn-graalvm-application</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It is possible to pass extra build arguments to <code>native-image</code>. For example, <code>-Ob</code> enables the quick build mode.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the native executables and execute a cURL command to test the whole application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl http://localhost:8080/books</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[{<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Building Microservices</span><span class="delimiter">&quot;</span></span>}]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps">9. Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Read <a href="https://micronaut-projects.github.io/micronaut-security/latest/guide/#oauth">Micronaut OAuth 2.0 Documentation</a> to learn more.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="help-with-the-micronaut-framework">10. Help with the Micronaut Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://micronaut.io/foundation/">Micronaut Foundation</a> sponsored the creation of this Guide. A variety of <a href="https://micronaut.io/commercial-support/">consulting and support services</a> are available.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license">11. License</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All guides are released with an <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache license 2.0 license</a> for the code and a <a href="https://creativecommons.org/licenses/by/4.0/deed.en">Creative Commons Attribution 4.0</a> license for the writing and media (images&#8230;&#8203;).
</td>
</tr>
</table>
</div>

            </div>
        </div>
    </div>
</main>

<footer id="footer">
    <div class="container">

        <div class="row">
            <div class="col-sm-5 footer-left">

                <div id="text-14" class="widget widget_text">
                    <div class="textwidget">
                        <p>
                            <a href="https://micronaut.io/foundation/"><img class="alignnone size-medium wp-image-3736" src="./images/micronaut_foundation_horizontal_white.svg" alt="Micronaut Foundation"/></a>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-sm-7 footer-right">

                <ul class="meta">

                    <li id="menu-item-2895" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2895">
                        <a href="https://micronaut.io/brand-guidelines/">Brand Guidelines</a>
                    </li>
                    <li id="menu-item-2894" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2894">
                        <a href="https://micronaut.io/community-guidelines/">Community Guidelines</a>
                    </li>
                    <li id="menu-item-3377" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-privacy-policy menu-item-3377">
                        <a href="https://micronaut.io/privacy-policy/">Privacy Policy</a>
                    </li>

                </ul>

                <div id="nav_menu-2" class="widget widget_nav_menu">
                    <div class="menu-links-container">
                        <ul id="menu-links" class="menu">
                            <li class="menu-item menu-item-type-custom menu-item-object-custom "><a href="https://micronautpodcast.com"><i class="fa fa-podcast"><span class="sr-only">Podcast</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom "><a href="https://micronaut.io/feed/rss/"><i class="fa fa-feed"><span class="sr-only">Feed</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom "><a href="mailto:info@micronaut.io"><i class="fas fa-envelope"><span class="sr-only">Mail</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://twitter.com/micronautfw"><i class="fab fa-twitter"><span class="sr-only">Twitter</span></i></a></li>
                            <li id="menu-item-6740" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6740"><a href="https://fosstodon.org/@micronaut"><i class="fab fa-mastodon"><span class="sr-only">Mastodon</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://discord.gg/9xRFsHv98T"><i class="fab fa-discord"><span class="sr-only">Discord</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://github.com/micronaut-projects/"><i class="fab fa-github"><span class="sr-only">GitHub</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.youtube.com/@MicronautFramework"><i class="fab fa-youtube"><span class="sr-only">YouTube</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.linkedin.com/showcase/micronaut"><i class="fab fa-linkedin"><span class="sr-only">LinkedIn</span></i></a></li>
                            <li class="menu-item menu-item-type-custom menu-item-object-custom"><a href="https://www.twitch.tv/micronautfw"><i class="fab fa-twitch"><span class="sr-only">Twitch</span></i></a></li>
                        </ul>
                    </div>
                </div>
                <div id="text-5" class="widget widget_text">
                    <div class="textwidget">
                        <p>
                            <small>Guides are licensed under <a href="https://creativecommons.org/licenses/by/4.0/deed.en">CC BY 4.0</a> for the writing/media and <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache.2.0</a> for the code</small>
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</footer>
</body>
</html>
