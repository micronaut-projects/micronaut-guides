asciidoctorj {
    version '2.1.0'
    modules {
        diagram {
            version '1.5.18'
        }
    }
    options doctype: "book", ruby: "erubis"
    docExtensions {
        block_macro (name: 'gist') {
            parent, target, attributes ->
                String content = """<div class="content">
<script src="https://gist.github.com/${target}.js"></script>
</div>"""
                createBlock(parent, "pass", [content], attributes, config);
        }
    }
    attributes "sourcedir": "build/code",
            "commondir": "src/docs/common",
            "source-highlighter": "coderay",
            "toc": "left",
            "idprefix": "",
            "idseparator": "-",
            "icons": "font",
            "setanchors": "",
            "listing-caption": "",
            "imagesdir": "images",
            "project-version": "$project.version"
}
